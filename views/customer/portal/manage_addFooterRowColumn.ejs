<% include ../header.ejs%>

<div style="position:relative;width:100%;height:100%;">
    <!--Layout-->
    <div class="site-layout">
            <!--Header Toolbar-->
            <!--Header Toolbar Close-->

            <!--Header-->
        <% include ../center/_nav_head.ejs%>
            <div class="page double-padding-bottom">
                <div class="container page-content">
                    <div class="row space-top" >
                        <!-- Sidebar-->
                        <% var active = "carousel"; %>
                        <% include ../center/_nav_customer_left.ejs%>
                        <!-- Sidebar CLose-->
                        <section class="col-md-10 pull-right space-bottom">
                            <div class="filterDivTab">
                                <% var curtTab = 'linkColumn';%>
                                <% include portalTab.ejs %>
                            </div>
                            <div class="col-sm-12 form-horizontal"  style="border:1px solid #e6e6e6">
                                <% var currentLink = data.subLink %>
                                <%
                                var isEdit = currentLink != null && currentLink != undefined;
                                currentLink = currentLink || {};
                                %>
                                <div class="form-group">
                                    <div class="col-sm-2" style="line-height:38px" >
                                        <span>子标题名称:</span>

                                    </div>
                                    <div class="col-sm-10">
                                        <input type="hidden" id="subLinkId" value="<%= currentLink.id %>"/>
                                        <input type="text" class="form-control" id="name"
                                               value="<%= isEdit ? currentLink.title : null %>">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-2" style="line-height:38px" >
                                        <span>内容:</span>

                                    </div>
                                    <div class="col-sm-10">
                                        <!--style="width:600px;height:300px;"-->
                                        <script id="editor" type="text/plain" style="height:500px;" ></script>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-2"></div>
                                    <div class="col-sm-10">
                                        <a href="javascript:void(0)" class="btn btn-primary" id="saveSubLinkBtn" style="display: inline-block;float:right">保存</a>
                                    </div>
                                </div>
                                <!--
                                <div class="row">
                                    <span class="col-sm-3">链接地址:</span>
                                    <div class="col-sm-9"><input type="text"/></div>
                                </div>-->
                            </div>
                        </section>
                    </div>
                </div>
            </div>
        </div>
    <% include ../_nav_bottom.ejs%>
</div>
<% include  ../footer.ejs %>
<script type="text/javascript" charset="utf-8" src="/static/ueditor/ueditor.config.js"></script>
<script type="text/javascript" charset="utf-8" src="/static/ueditor/_examples/editor_api.js"></script>
<!--建议手动加在语言，避免在ie下有时因为加载语言失败导致编辑器加载失败-->
<!--这里加载的语言文件会覆盖你在配置项目里添加的语言类型，比如你在配置项目里配置的是英文，这里加载的中文，那最后就是中文-->
<script type="text/javascript" charset="utf-8" src="/static/ueditor/lang/zh-cn/zh-cn.js"></script>
<script src="/static/source/js/getGoodsDetail.js"></script>
<script src="/static/source/js/portal.js"></script>
<script>
    var ue = UE.getEditor('editor',{
        fullscreen:false,
        elementPathEnabled:false,
        toolbars:[['FullScreen',  'Undo', 'Redo',
            '|','bold', 'italic', 'underline',
            '|','forecolor', 'backcolor',
            '|','customstyle', 'paragraph', 'fontfamily', 'fontsize',
            '|','justifyleft', 'justifycenter', 'justifyright', 'justifyjustify',
            '|','simpleupload','pagebreak', 'template',

        ]]
    });
    ue.addListener("ready", function () {
        //id 不为空 要去请求 远程数据
        if($('#subLinkId').val()!=null){
            $.ajax({
                type:"get",
                url:"/rest/customer/portal/link/"+$('#subLinkId').val(),
                success:function(feedback){
                    if(feedback.status == 200){
                        var html= feedback.data.html;
                        UE.getEditor('editor').setContent(html);
                    }
                }
            });
        }
    });
</script>